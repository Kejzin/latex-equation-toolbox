{"version":3,"sources":["webpack:///./components/ImageExport/style.sass?b786","webpack:///./components/ImageExport/index.tsx"],"names":[],"mappings":";;;;;AAAA;AACA,kBAAkB,gG;;;;;;;;;;;;;;;;;;;;ACDmB;AACA;AAEG;AACa;AAErD,IAAI,KAAK,GAAG,mBAAO,CAAC,MAAc,CAAC;AACnC,IAAI,SAAS,GAAG,mBAAO,CAAC,MAAuB,CAAC;AAiBhD,IAAqB,WAAW,GAAhC,iBAAiC,SAAQ,iDAAyB;IAJlE;;QAME,aAAQ,GAAG,EAAE;IAyCf,CAAC;IAvCC,WAAW;QAET,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,IAAI,CAAC,QAAQ,EAAE;YACtC,OAAM;SACP;QAED,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;QAE3B,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ;QAElC,uEAAU,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YACzB,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;YAC7B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,UAAS,MAAM;gBACtC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;gBAC3B,QAAQ,CAAC,uEAAO,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;gBACrE,2DAA2D;YAC7D,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAED,MAAM,CAAE,KAAK;QACX,IAAI,CAAC,WAAW,EAAE;QAElB,IAAI,OAAO,GAAG,4BAA4B,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;QAE7G,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK;QAChC,OAAO,2DAAK,SAAS,EAAE,KAAK,CAAC,SAAS;YACpC,0DAAI,SAAS,EAAE,KAAK,CAAC,KAAK,wBAAwB;;YAC0B,6DAAK;YAAA,6DAAK;;YACnF,6DAAK;YACR,2DAAK,SAAS,EAAE,SAAS,CAAC,IAAI;gBAC5B,2DAAK,GAAG,EAAE,KAAK,CAAC,WAAW,CAAC,OAAO,GAAI,CACnC;YAAA,6DAAK;;YACR,6DAAK;YACR,2DAAK,SAAS,EAAE,SAAS,CAAC,IAAI;gBAC5B,2DAAK,GAAG,EAAE,KAAK,CAAC,WAAW,CAAC,GAAG,GAAI,CAC/B,CACF;IACR,CAAC;CACF;AA3CoB,WAAW;IAJ/B,oEAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACjB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK;QACxB,WAAW,EAAE,KAAK,CAAC,WAAW;KAC/B,CAAC,CAAC;GACkB,WAAW,CA2C/B;+DA3CoB,WAAW","file":"5.chunk.89781.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"mathBackground\":\"mathBackground__3DwWi\",\"container\":\"container__drWZf\",\"title\":\"title__2gSTX\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/ImageExport/style.sass\n// module id = BMbX\n// module chunks = 5","import { h, Component } from 'preact'\nimport { connect } from 'react-redux'\n\nimport loadMj2img from './mathjax-setup'\nimport { actions } from '../../reducers/image-export'\n\nlet style = require('./style.sass')\nlet mathStyle = require('../Preview/style.sass')\n\ninterface PropsType {\n  latex: string,\n  dispatch(action: any)\n}\n\ndeclare global {\n  interface window {\n    MathJax: any\n  }\n}\n\n@connect(store => ({\n  latex: store.input.latex,\n  imageExport: store.imageExport\n}))\nexport default class ImageExport extends Component<PropsType, any> {\n\n  oldLatex = ''\n\n  generatePNG() {\n\n    if (this.props.latex === this.oldLatex) {\n      return\n    }\n\n    console.log('Generate png')\n\n    let dispatch = this.props.dispatch\n\n    loadMj2img().then(mj2img => {\n      console.log('mj2img', mj2img)\n      mj2img(this.props.latex, function(output){\n        console.log('here', output)\n        dispatch(actions.updateImage(output.img, output.svg, output.svgData))\n        //document.getElementById(\"target\").innerHTML = output.svg;\n      })\n    })\n  }\n\n  render (props) {\n    this.generatePNG()\n\n    let svgData = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(props.imageExport.svg)))\n\n    this.oldLatex = this.props.latex\n    return <div className={style.container}>\n      <h2 className={style.title}>Image export view</h2>\n      You can drag and drop the images below, into other applications or a folder.<br/><br/>\n      SVG<br/>\n      <div className={mathStyle.math}>\n        <img src={props.imageExport.svgData} />\n      </div><br/>\n      PNG<br/>\n      <div className={mathStyle.math}>\n        <img src={props.imageExport.png} />\n      </div>\n    </div>\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/ImageExport/index.tsx"],"sourceRoot":""}